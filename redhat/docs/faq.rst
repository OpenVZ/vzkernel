==========================
Frequently Asked Questions
==========================

1. The 'os-build' branch doesn't compile, what can I do?
--------------------------------------------------------

The os-build branch is auto-updated daily from upstream.  While upstream
is pretty good about having code that compiles, occassionally issues pop
up.

First, check the ark-latest branch to see if any critical patches were
applied to temporarily resolve things.

Second, sometimes the problem is new and waiting 24-48 hours for a
maintainer to resolve things will be expected.

Third, you can use a release tag (ie kernel-5.14.1-0), if you do not need
bleeding edge.

2. The 'os-build' branch doesn't pass 'make dist-configs'?
----------------------------------------------------------

During the -rc1 and -rc2 phase, this is not uncommon.  Most configs should
be autogenerated to defaults and placed in pending-ark until an official
review has taken place.

Occassionally during the review cycle, the default changes and new configs
are revealed that are not autogenerated and leads to unresolved configs.

Creating a file under redhat/configs/pending-ark/ with the config
settings necessary should temporarily resolve this until the maintainers can
resolve this properly.

Please notify us on kernel@lists.fedoraproject.org or file an issue at
https://gitlab.com/cki-project/kernel-ark/-/issues.


3. How does an MR get reviewed?
-------------------------------

Anything Fedora specific (configs, custom patches, scripts) will be decided
by the Fedora kernel maintainer with input from the community.

Any patch that is cherry-picked from a commit in an upstream tree will be
taken by the maintainer immediately with the assumption the commit will be
merged to Linus's tree within a week.

Any patch that touches infrastructure (redhat/) will need review by Red Hat
developers.  Those developers are auto-added by webhooks to the MR.  An
approval from 1 developer is generally good enough.

Any patch that touches kernel code that is not going upstream will need
reviews by Red Hat developers.  Those developers are auto-added by webhooks
to the MR.  These patches must wrapped with "#ifndef
CONFIG_RHEL_DIFFERENCES" if possible and be provided with a good reason why
it is important to include despite upstream not taking it.  An approval from
all the assigned reviewers is necessary.

See https://redhat.gitlab.io/centos-stream/src/kernel/documentation/ for a
more thorough discussion.

4. Can I use build services koji or brew?
-----------------------------------------

Yes.

.. code-block:: sh

   make dist-srpm
   koji build --scratch eln|rawhide <srpm>

.. code-block:: sh

   # this target requires internal Red Hat network access and will always
   # build against the latest RHEL major compose
   make dist-brew
